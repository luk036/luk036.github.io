<!doctype html>
<html>
  <head>
    <title>
      Lecture 4a: Robust Analog Circuit Sizing Under Process Variations
    </title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1,width=device-width"
    />
    <link rel="stylesheet" type="text/css" href="../css/spaces.css" />
    <link rel="stylesheet" type="text/css" href="../css/slides.css" />
    <link rel="stylesheet" type="text/css" href="../css/nord-dark.css" />
    <link rel="stylesheet" type="text/css" href="../css/nord-light.css" />
    <link rel="stylesheet" type="text/css" href="../css/font-nord.css" />
    <link rel="stylesheet" type="text/css" href="../css/bg-nord.css" />
    <link rel="stylesheet" type="text/css" href="../css/style.css" />
  </head>
  <body>
    <textarea id="source">

layout: true
class: typo, typo-selection

---

class: nord-dark, middle, center

# Lecture 4a: Robust Analog Circuit Sizing Under Process Variations

@luk036 ğŸ‘¨â€ğŸ’»

2025-10-15 ğŸ“…

---

## ğŸ“ Abstract

This lecture focuses on robust sizing of analog circuits under process variations at advanced nodes. Key topics include:

- ğŸ—ï¸ Challenges in 20nm analog design (double-patterning, layout effects, FinFET/GAA transistors)
- ğŸ›¡ï¸ Designing for robustness against process variations
- âš™ï¸ Analog circuit sizing problem formulation
- ğŸ“ˆ Emerging CAD approaches:
  - Knowledge-based methods
  - Optimization-based techniques
- ğŸ§® Robust geometric programming using:
  - Affine arithmetic
  - Ellipsoid method
- ğŸ”Œ CMOS two-stage op-amp design case study

---

## ğŸ”‘ Keywords

.pull-left[

- ğŸ›ï¸ Analog circuit æ¨¡æ‹Ÿç”µè·¯
- ğŸ›¡ï¸ Design for robustness é²æ£’æ€§è®¾è®¡
- âš ï¸ Worst-case scenarios æœ€åæƒ…æ™¯
- â• Affine arithmetic ä»¿å°„è¿ç®—
- ğŸ¥š Convex programming å‡¸è§„åˆ’
- ğŸ“ Geometric programming å‡ ä½•è§„åˆ’
- â— Posynomial æ­£é¡¹å¼ (Positive + polynomial)
- ğŸ«’ Ellipsoid method æ¤­çƒæ³•

] .pull-right[

![image](figs/dfm.svg)

]

---

## Overview ğŸ“‹

- ğŸ—ï¸ 20nm Analog Design Challenges
- ğŸ“ Design for Variability
- ğŸ›¡ï¸ Design for Robustness
- âš™ï¸ Analog Sizing Formulation
- ğŸ›¡ï¸ Robust Geometric Programming
- â• Affine Arithmetic Methods
- ğŸ”Œ Design Examples

---

## ğŸ¬ Introduction: Cost Comparison

| Costs        | 28nm      | 20nm        |
| ------------ | --------- | ----------- |
| Fab Costs    | 3B        | 4B - 7B     |
| Process R&D  | 1.2B      | 2.1B - 3B   |
| Mask Costs   | 2M - 3M   | 5M - 8M     |
| Design Costs | 50M - 90M | 120M - 500M |

  : Fab, process, mask, and design costs are much higher at 20nm (IBS,
May 2011)

---

## ğŸ—ï¸ Challenges at 20nm

- ğŸ¨ Double-patterning requirements
- ğŸ“ Layout-dependent effects
- ğŸ”Œ New local interconnect layers
- ğŸ“œ >5,000 design rules
- âš ï¸ Device variation and sensitivity
- ğŸ—ï¸ FinFET/GAA transistors

---

## ğŸ¨ Double Patterning

![img](lec04.files/img001.png)

---

## âš ï¸ Overlay Error (Mask Shift)

- Parasitic matching becomes very challenging

![img](lec04.files/img002.png)

---

## ğŸ“ Layout-Dependent Effects

| Effect                          | >40nm | 40nm | â‰¥28nm |
|---------------------------------|:-----:|:----:|:-----:|
| Well Proximity Effect (WPE)     |   x   |   x  |   x   |
| Poly Spacing Effect (PSE)       |       |   x  |   x   |
| Length of Diffusion (LOD)       |   x   |   x  |   x   |
| OD to OD Spacing Effect (OSE)   |       |   x  |   x   |

---

## ğŸ”Œ New Local Interconnect Layers

![img](lec04.files/img003.png)

---

## ğŸ—ï¸ FinFET Transistors

![Discrete width: Can add 2 fins or 3 fins, but not 2.75 fins](lec04.files/img004.png)

---

## ğŸ—ï¸ Gate-All-Around Transistors

![img](lec04.files/868_main.jpg)

---

## ğŸ›¡ï¸ Design for Robustness

Key considerations for analog circuits:
- Process variations are inherent in manufacturing
- Variations caused by:
  - ğŸŒ¡ï¸ Temperature
  - âš¡ Voltage
  - ğŸ­ Manufacturing tolerances
- Must include process variations in specifications

---

## ğŸ”„ Basic Design Flow

![img](lec04.files/img005.png)

---

## ğŸ” Top-down Design Phases

![img](lec04.files/img006.png)

---

## ğŸ”Œ Analog Synthesis Flow

![img](lec04.files/img007.png)

---

## âš™ï¸ Analog Circuit Sizing Problem

**Definition**:
Given circuit topology, specifications and technology, find design variables that:
- Meet all specifications
- Optimize circuit performance

**Challenges**:
- ğŸšï¸ High degrees of freedom
- âš ï¸ Performance sensitivity to variations

---

## ğŸ’» Main CAD Approaches

.pull-left[
**Knowledge-based**:
- Circuit understanding
- Design heuristics
]

.pull-right[
**Optimization-based**:
- Equation-based:
  - Circuit equations
  - Numerical solvers
- Simulation-based:
  - Circuit simulation
]

*Practical designs mix these approaches*

---

## ğŸ“ˆ Geometric Programming (GP)

Emerging technique for analog design:
- Solves robust GP problems using:
  - ğŸ«’ Ellipsoid method
  - â• Affine arithmetic
- Provides mathematical guarantees
- Enables formal optimization

---

class: nord-dark, middle, center

.pull-left[

# Q&A ğŸ¤

]
.pull-right[

![image](figs/questions-and-answers.svg)

]

    </textarea>
    <script src="../js/remark.min.js"></script>
    <script src="../katex/katex.min.js" type="text/javascript"></script>
    <script
      src="../katex/contrib/auto-render.min.js"
      type="text/javascript"
    ></script>
    <script type="text/javascript">
      renderMathInElement(document.getElementById("source"), {
        delimiters: [
          { left: "$$", right: "$$", display: true },
          { left: "$", right: "$", display: false },
        ],
      });
      var slideshow = remark.create({
        ratio: "4:3", // çª—å£æ¯”ä¾‹
        // å¯é€‰ï¼šarta, ascetic, dark, default, far, github, googlecode, idea,
        // ir-black, magula, monokai, rainbow, solarized-dark, solarized-light,
        // sunburst, tomorrow, tomorrow-night-blue, tomorrow-night-bright,
        // tomorrow-night, tomorrow-night-eighties, vs, zenburn.
        highlightStyle: "tomorrow-night-eighties",
        highlightLines: true,
        countIncrementalSlides: false, // å¢é‡å†…å®¹æ˜¯å¦ç®—ä¸€é¡µ
        // slideNumberFormat: "", // è‹¥å°†æ­¤å‚æ•°è®¾ç½®ä¸º ""ï¼Œå°†ä¸æ˜¾ç¤ºé¡µç 
        navigation: {
          scroll: false, // æ˜¯å¦å…è®¸ä½¿ç”¨é¼ æ ‡æ»šè½®ç¿»é¡µ
          touch: true, // ï¼ˆå¦‚æœæ˜¯è§¦æ‘¸å±ï¼‰æ˜¯å¦å…è®¸ç‚¹å‡»å±å¹•å·¦è¾¹æˆ–å³è¾¹å‰åç¿»é¡µ
          click: false, // æ˜¯å¦å…è®¸é¼ æ ‡ç‚¹å‡»å±å¹•å·¦è¾¹æˆ–å³è¾¹å‰åç¿»é¡µ
        },
      });
    </script>
  </body>
</html>
