# 项目报告：MyHDL 中的数字滤波块及其与 pyFDA 的集成

Sriyash Caculo
6-8 分钟

2018 年的 Google Summer of Code 2018 已经进入了最后的阶段，我想花点时间回顾一下完成了哪些目标，还有哪些未完成的任务，以及我的收获。

项目概况在之前的博文中已经讨论过了。然而，这篇博文对任何想了解项目的人来说都是一个指南，也是对希望了解这个项目或将其进行下去的人来说是一个参考。因此，我将再次介绍一下项目的细节。

## 项目概述

"数字滤波块在 MyHDL 和 PyFDA 集成中的应用 "项目旨在利用和展示 MyHDL、PyFDA 和 Python 在数字滤波设计领域的优势。MyHDL 是一个用于开发和测试 HDL 代码的 Python 模块。 PyFDA 是一个基于 GUI 的工具，用 Python/Qt 编写，用于分析和设计离散时间滤波器。本项目的目的是在 Pyfda 中提供一个工作流程，在 VHDL/Verilog 中自动实现 fixpoint 滤波器的过程，并在数字设计环境中验证正确的性能。基于 MyHDL 的 "Filter-block "包可以实现设计和验证的自动化。

为了实现这一目标，有必要为 filter-blocks 包建立一个 API，允许从外部应用程序轻松访问滤波器的实现，特别是在本例中，Pyfda。

此外，将 MyHDL 和 PyFDA 连接起来还有更多的好处。这种组合可以填补算法开发和 HDL fixpoint 块之间的开源工具链的空白。

## 主要目标

我在介绍性的帖子中提出了一系列的项目目标，其中大部分目标已在规定的时间内实现，其余的目标还在进行中。

这些是最初设定的主要阶段性目标。

    在MyHDL中实现多个数字滤波块，并经过严格的测试。
        直接形式的FIR滤波器。
        线性相位FIR滤波器的收缩实现。
        IIR滤波器的并行路径实现。
    滤波器块的测试，以检查其正确性和性能。
    滤波器与PyFDA的集成，包括设计一个合适的接口，将滤波器系数传递给MyHDL滤波器块。
    为所有的过滤器模块提供教程和文档，以提高可用性。

在项目过程中，通过与导师的讨论，我确定了项目的主要重点。为过滤器模块包建立一个 API 是非常重要的，因为它可以实现与 Pyfda 的集成/通信的目的，因此构成了项目的骨干。在集成的同时，还需要一些过滤器的实现来测试集成。

项目期间完成的主要里程碑（截至本帖）是

    为filter-block包构建了一个API来访问所有的过滤器实现和传递参数。用PyFDA测试了两个过滤器实现的API。Direct form I FIR过滤器和Direct form II IR过滤器。
    filter-blocks包中的过滤器实现。
        Direct form I FIR过滤器。
        直接形式I FIR滤波器的直接形式IIR滤波器。
        IIR滤波器的并行路径实现. [WIP]
        FIR/IIR滤波器的二阶段实现。[WIP]
    测试过滤器块的正确性和性能。
    关于如何使用API的教程可以在这里找到。为了提高可读性，我们对代码进行了记录，并添加了注释。

在项目过程中，最大的挑战之一是在 Myhdl 中实现滤波器（尤其是 IIR）的硬件设计选择。我发现，即使是设计中的微小变化也会对最终的输出产生重大影响，因此必须谨慎地进行设计选择，以获得与浮点实现的良好相关性。在设计上的选择是一个挑战，包括决定累加器的位数，在累加器中加入饱和逻辑，截断累加器以适应输出和回馈等。

## 项目洗衣机列表

进入技术方面的工作，我在这个夏天做的工作。在这里，我通过列出合并后的拉动请求和正在进行的工作，介绍一下我到现在为止所做的工作。对于那些只想了解 Filter-block 的人来说，这可能不会引起他们的兴趣。

以下是按时间顺序排列的提交/拉取请求列表，并附有简短的说明，说明在提交中添加了哪些功能。
(合并) 提交

FIR 直接窗体 I 的实现。FIR 直接形式 I 实现：FIR 直接形式 I 实现，并在 MyHDL 中进行测试。

IIR 并行实现：IIR 并行实现，并在 MyHDL 中进行测试。

Pyfda 集成：在 Pyfda 中增加了对过滤块集成的支持。

在 Pyfda 中转换为 vhdl 或 verilog : 在 Pyfda 中增加了将滤波器实现转换为 Verilog 和 VHDL 的支持。

Filter-block API 和 Filter 实现。这是一个非常大的拉动请求，涉及到项目的不同方面。

滤波块 API 和滤波块实现：这是一个非常大的请求，涉及到项目的不同方面。
