layout: true
class: typo, typo-selection

---

count: false
class: nord-dark, center, middle

# å¦‚ä½•ç”¨ Markdown + Pandoc å†™æ¯•ä¸šè®ºæ–‡

## @luk036

---

### æ‘˜è¦

æœ¬æ–‡ç”¨ç®€æ˜çš„æ ·ä¾‹ï¼Œä»‹ç»å¦‚ä½•ä½¿ç”¨ Markdown å’Œ Pandoc ç­‰è‡ªåŠ¨åŒ–å·¥å…·å¸®ä½ å¤„ç†æ•°å­¦å…¬å¼ã€å‚è€ƒæ–‡çŒ®å¼•ç”¨ã€å›¾ç‰‡äº¤å‰ç´¢å¼•ç­‰å­¦æœ¯è®ºæ–‡å†™ä½œä¸­å¸¸è§çš„æ£˜æ‰‹é—®é¢˜ã€‚

**å…³é”®è¯ï¼š** pandoc pandoc-crossref markdown

---

### Abstract

This is a tutorial file for writing a undergraduate thesis using Markdown and `pandoc`.

**Keywords:** pandoc, pandoc-crossref markdown

---

class: nord-light, center, middle

## ç»ªè®º

---

### `pandoc`

Pandoc is a Haskell library for converting from one markup format to another, and a command-line tool that uses this library. It can read Markdown and write Word docx.

---

### `pandoc-crossref` filter

With this filter[^1], you can cross-reference figures (see @fig:figure0), display equations (see @eq:eqn1), tables (see [@tbl:table1]) and sections ([@sec:sec1; @sec:sec2; @sec:caption-attr; @sec:table-capts])

There is also support for code blocks, for example, [@lst:captionAttr; @lst:tableCaption].

Subfigures are supported, see [@fig:subfigures; @fig:subfigureB]

[^1]: This file is generated by the command:

> pandoc -F pandoc-crossref -F pandoc-citeproc --bibliography=reference.bib --csl=chinese-gb7714-2005-numeric.csl --reference-doc=fd_bylw_t.docx --toc demo.md crossref.yaml -o temp.docx

---

### `pandoc --reference-doc`

Use the specified file as a style reference in producing a docx file. For best
results, the reference docx should be a modified version of a docx file produced using pandoc. The contents of the reference docx are ignored, but its stylesheets and document properties (including margins, page size, header, and footer) are used in the new docx.

---

### List Items

List items may include other lists. In this case the preceding blank line is optional. The nested list must be indented four spaces or one tab:

```markdown
- fruits
  1. apples
     - macintosh
     - red delicious
  2. pears
  3. peaches
- vegetables
  - broccoli
  - chard
```

---

### List Items

Pandoc also pays attention to the type of list marker used, and to the starting number:

```markdown
9. Ninth
10. Tenth
11. Eleventh
    i. subone
    ii. subtwo
    iii. subthree
```

---

### Definition List

Pandoc supports definition lists, using the syntax of PHP Markdown Extra with some extensions.

```markdown
Term 1
: Definition 1

Term 2
: Definition 2
```

---

class: nord-light, center, middle

# å›¾ã€è¡¨ã€å…¬å¼

---

### å›¾

An image occurring by itself in a paragraph will be rendered as a figure with a caption.

```markdown
![This is the caption](media/image2.jpeg){#fig:figure0}
```

---

### å›¾

If you just want a regular inline image, just make sure it is not the only thing in the paragraph. One way to do this is to insert a nonbreaking space after the image:

```markdown
![No caption](media/image2.jpeg)\
```

---

### è¡¨

Simple tables can be generated using Markdown.

```markdown
|              |     28nm      |      20nm       |
| ------------ | :-----------: | :-------------: |
| Fab Costs    |     \$3B      |   \$4B - \$7B   |
| Process R&D  |    \$1.2B     |  \$2.1B - \$3B  |
| Mask Costs   |  \$2M - \$3M  |   \$5M - \$8M   |
| Design Costs | \$50M - \$90M | \$120M - \$500M |

: Table example {#tbl:table1}
```

---

### å…¬å¼

Display equations are labelled and numbered:

```markdown
$$P(x) = \sum_i a_i x^i$$ {#eq:eqn1}
```

```markdown
Those can also appear in the middle of
paragraph $x^2 = 0$ like this.
```

Note that pandoc doesn't understand LaTeX's `\over` command.

---

### Code blocks

There are a couple options for code block labels. Those work only if code block id starts with `lst:`, e.g. `{#lst:label}`

---

### `caption` attribute

`caption` attribute will be treated as code block caption. If code block has both id and `caption` attributes, it will be treated as numbered code block.

````markdown
```{#lst:captionAttr .haskell caption="Listing caption A"}
main :: IO ()
main = putStrLn "Hello World!"
```
````

---

### Table-style captions

Enabled with `codeBlockCaptions` metadata option. If code block is immediately
adjacent to paragraph, starting with `Listing: ` or `: `, said paragraph will be treated as code block caption.

````markdown
Listing: Listing caption B

```{#lst:tableCaption .haskell}
main :: IO ()
main = putStrLn "Hello World!"
```
````

---

### Subfigures

It's possible to group figures as subfigures:

```markdown
<div id="fig:subfigures">
![subfigure 1 caption](media/image1.jpeg){#fig:subfigureA}

![subfigure 2 caption](media/image2.jpeg){#fig:subfigureB}

Caption of figure

</div>
```

---

### Subfigures

To sum up, subfigures are made with a div having a figure id. Contents of said div consist of several paragraphs. All but last paragraphs contain one subfigure each, with captions, images and (optionally) reference attributes. Last paragraph contains figure caption.

---

### æ–‡çŒ®ç»¼è¿°

ç‹å›½æˆé˜è¿°äº†å¤§æ•°æ®çš„ç‰¹æ€§å˜è¿è¿‡ç¨‹[@ç‹å›½æˆ 2017 ä»]ã€‚

å…¶ä»–å­¦è€…è®²è¿°äº†å¤§æ•°æ®çš„ä»·å€¼å’Œå¤„ç†æ–¹å¼[@äºæ™“é¾™ 2014 å¤§æ•°æ®çš„ç»æµå­¦æ¶µä¹‰åŠä»·å€¼åˆ›é€ æœºåˆ¶;@å¾è®¡ 2015 åŸºäºç²’è®¡ç®—çš„å¤§æ•°æ®å¤„ç†]ã€‚

---

### é™„è¡¨ä¸€ï¼š`crossref.yaml`

.font-sm[

```yaml
---
cref: False
chapters: True
chaptersDept: 2
codeBlockCaptions: True
figureTitle: "å›¾ "
tableTitle: "è¡¨ "
listingTitle: "åˆ—è¡¨ "
tableTemplate: "*$$tableTitle$$ $$i$$*$$titleDelim$$ $$t$$"
autoSectionLabels: True
figPrefix:
  - "å›¾"
eqnPrefix:
  - "å…¬å¼"
tblPrefix:
  - "è¡¨"
lstPrefix:
  - "åˆ—è¡¨"
secPrefix:
  - "Â§"
```

]

---

class: nord-dark, center, middle

# Q & A ğŸ™‹
